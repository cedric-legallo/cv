var https = require('https'), express = require('express');

var port = process.env.PORT || 3000;

var app = express(
    express.bodyParser()
  , express.directory(__dirname + 'public')
  , express.static(__dirname + "/public")
  , express.cookieParser()
//  , express.session({ secret: 'esoognom4321'})
//  , mongooseAuth.middleware()
);

//app.use(express.directory('public'))
app.use(express.static('public'))

app.configure( function () {
  app.set('views', __dirname + '/views');
  app.set('view options', {layout: false});
  app.set('view engine', 'ejs');
});

app.get('/', function (req, res) {
	var options = {
		host:'spreadsheets.google.com'
		, path: '/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values?alt=json'
    };

    /*var req = https.get(options, function(resp){
		var wholeResp='';
		resp.on('data', function (chunk) {
			wholeResp+=chunk;
		});
		resp.on('end', function(){
			wholeResp=JSON.parse(wholeResp);
			compList=wholeResp.feed.entry;
			*/
      compList=[{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/b8lvi"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Spring"},"content":{"type":"text","$t":"niveau: 1, priorite: 1"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/b8lvi"}],"gsx$competence":{"$t":"Spring"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"1"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cpzh4"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"XSLT"},"content":{"type":"text","$t":"niveau: 3, priorite: 1"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cpzh4"}],"gsx$competence":{"$t":"XSLT"},"gsx$niveau":{"$t":"3"},"gsx$priorite":{"$t":"1"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cre1l"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Javacript"},"content":{"type":"text","$t":"niveau: 1, priorite: 1"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cre1l"}],"gsx$competence":{"$t":"Javacript"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"1"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/chk2m"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Scrum"},"content":{"type":"text","$t":"niveau: 1, priorite: 1"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/chk2m"}],"gsx$competence":{"$t":"Scrum"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"1"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/ciyn3"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"eXtreme Programming"},"content":{"type":"text","$t":"niveau: 3, priorite: 1"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/ciyn3"}],"gsx$competence":{"$t":"eXtreme Programming"},"gsx$niveau":{"$t":"3"},"gsx$priorite":{"$t":"1"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/ckd7g"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"JSF"},"content":{"type":"text","$t":"niveau: 1, priorite: 2"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/ckd7g"}],"gsx$competence":{"$t":"JSF"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"2"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cyevm"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"CSS"},"content":{"type":"text","$t":"niveau: 2, priorite: 2"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cyevm"}],"gsx$competence":{"$t":"CSS"},"gsx$niveau":{"$t":"2"},"gsx$priorite":{"$t":"2"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cztg3"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Hibernate"},"content":{"type":"text","$t":"niveau: 3, priorite: 2"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cztg3"}],"gsx$competence":{"$t":"Hibernate"},"gsx$niveau":{"$t":"3"},"gsx$priorite":{"$t":"2"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d180g"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"HTML5"},"content":{"type":"text","$t":"niveau: 1, priorite: 2"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d180g"}],"gsx$competence":{"$t":"HTML5"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"2"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cssly"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"JQuery"},"content":{"type":"text","$t":"niveau: 2, priorite: 2"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cssly"}],"gsx$competence":{"$t":"JQuery"},"gsx$niveau":{"$t":"2"},"gsx$priorite":{"$t":"2"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cu76f"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"XML"},"content":{"type":"text","$t":"niveau: 1, priorite: 2"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cu76f"}],"gsx$competence":{"$t":"XML"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"2"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cvlqs"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Web Services"},"content":{"type":"text","$t":"niveau: 3, priorite: 2"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cvlqs"}],"gsx$competence":{"$t":"Web Services"},"gsx$niveau":{"$t":"3"},"gsx$priorite":{"$t":"2"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cx0b9"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Dojo"},"content":{"type":"text","$t":"niveau: 1, priorite: 3"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/cx0b9"}],"gsx$competence":{"$t":"Dojo"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"3"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d9ney"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Jenkins"},"content":{"type":"text","$t":"niveau: 2, priorite: 3"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d9ney"}],"gsx$competence":{"$t":"Jenkins"},"gsx$niveau":{"$t":"2"},"gsx$priorite":{"$t":"3"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/db1zf"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Struts"},"content":{"type":"text","$t":"niveau: 2, priorite: 3"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/db1zf"}],"gsx$competence":{"$t":"Struts"},"gsx$niveau":{"$t":"2"},"gsx$priorite":{"$t":"3"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/dcgjs"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"UML"},"content":{"type":"text","$t":"niveau: 1, priorite: 3"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/dcgjs"}],"gsx$competence":{"$t":"UML"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"3"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/ddv49"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Maven"},"content":{"type":"text","$t":"niveau: 2, priorite: 3"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/ddv49"}],"gsx$competence":{"$t":"Maven"},"gsx$niveau":{"$t":"2"},"gsx$priorite":{"$t":"3"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d415a"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"Ajax"},"content":{"type":"text","$t":"niveau: 1, priorite: 3"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d415a"}],"gsx$competence":{"$t":"Ajax"},"gsx$niveau":{"$t":"1"},"gsx$priorite":{"$t":"3"}},{"id":{"$t":"https://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d5fpr"},"updated":{"$t":"2013-01-21T16:37:40.057Z"},"category":[{"scheme":"http://schemas.google.com/spreadsheets/2006","term":"http://schemas.google.com/spreadsheets/2006#list"}],"title":{"type":"text","$t":"MySQL"},"content":{"type":"text","$t":"niveau: 2, priorite: 3"},"link":[{"rel":"self","type":"application/atom+xml","href":"http://spreadsheets.google.com/feeds/list/0AiEH0wUq8MkHdEl4d2lnRnFzNkEyS05tb2p1b0FhTWc/od6/public/values/d5fpr"}],"gsx$competence":{"$t":"MySQL"},"gsx$niveau":{"$t":"2"},"gsx$priorite":{"$t":"3"}}];
			res.render('index.ejs');
		/*});
    });
    req.on('error', function(e){
		console.log('error : ' + e.message);
    });
    req.end();*/
});

app.get('/convertList', function (req, res) {
    res.render('cl2html.ejs');
});

app.listen(port, function() {
  console.log("Listening on " + port);
});